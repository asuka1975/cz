# 07 - プログラム構造

## 概要

Cz プログラムの全体構造を定義する。MS1 では単一ファイルのプログラムをサポートする。

## 構文

```bnf
program = function_definition*
```

プログラムはゼロ個以上の関数定義から構成される。

## 意味論

### エントリポイント

- プログラムの実行は `main` 関数から開始される
- `main` 関数のシグネチャは `fn main() -> i32` でなければならない
- `main` 関数の戻り値はプログラムの終了コードとなる
- `main` 関数が存在しない場合はコンパイルエラー

### トップレベル要素

- MS1 ではトップレベルに配置できるのは関数定義のみ
- グローバル変数やトップレベルの式は許可しない

### 関数定義の順序

- 関数は定義順に関係なく相互参照可能 (前方参照をサポート)
- 同名の関数を複数定義した場合はコンパイルエラー

### ソースファイル

- ソースファイルの拡張子は `.cz`
- エンコーディングは UTF-8
- MS1 では単一ファイルのプログラムのみサポート (複数ファイル / モジュールは将来対応)

## 例

### 最小のプログラム

```cz
fn main() -> i32 {
    0
}
```

### 複数の関数を持つプログラム

```cz
fn add(a: i32, b: i32) -> i32 {
    a + b
}

fn main() -> i32 {
    let result: i32 = add(1, 2);
    print_i32(result);
    0
}
```

### 相互再帰

```cz
fn is_even(n: i32) -> i32 {
    if n == 0 {
        true
    } else {
        is_odd(n - 1)
    }
}

fn is_odd(n: i32) -> i32 {
    if n == 0 {
        false
    } else {
        is_even(n - 1)
    }
}

fn main() -> i32 {
    print_i32(is_even(4));
    0
}
```

## 制約・制限

- MS1 では単一ファイルのプログラムのみサポート
- モジュールシステム / `import` は将来対応
- グローバル変数はサポートしない
- `main` 関数は必須であり、シグネチャは `fn main() -> i32` に固定
